<html>
  <head>
    <script src="js/aframe.js"></script>
    <script src="js/follow.js"></script>
    <script src="js/aframe-extras.js"></script>
    <script src="js/aframe-physics-system.js"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
    <title>Rats'N'Cats</title>

    <script>
        $ = (sel) => document.querySelector(sel)
        $$ = (sel) => document.querySelectorAll(sel)
        on = (elem, type, hand) => elem.addEventListener(type,hand)
    </script>
  </head>

  <body>
    <a-scene physics="friction:0.0; restitution:0.2; debug:true"
        renderer="antialias:true" >
   <!----------------------------------------------------- assets ---------------------------------------------------------------->
      <a-asset-item id="landscape-mtl" src="assets/landscape.mtl"></a-asset-item>
      <a-asset-item id="landscape-obj" src="assets/landscape.obj"></a-asset-item>
      <a-asset-item id="tree-mtl" src="assets/singletree.mtl"></a-asset-item>
      <a-asset-item id="tree-obj" src="assets/singletree.obj"></a-asset-item>
      <a-asset-item id="twotrees-mtl" src="assets/twotrees.mtl"></a-asset-item>
      <a-asset-item id="twotrees-obj" src="assets/twotrees.obj"></a-asset-item>
      <a-asset-item id="cat-obj" src="objects/cat.obj"></a-asset-item>
      <a-asset-item id="cat-mtl" src="objects/cat.mtl"></a-asset-item>
      <a-asset-item id="mouse-obj" src="objects/mouse.obj"></a-asset-item>
      <a-asset-item id="mouse-mtl" src="objects/mouse.mtl"></a-asset-item>
      <a-asset-item id="cheese-obj" src="objects/cheese.obj"></a-asset-item>
      <a-asset-item id="cheese-mtl" src="objects/cheese.mtl"></a-asset-item>
      
   <!----------------------------------------------------- models ---------------------------------------------------------------->
      <a-sky color="#58D3F7"></a-sky>
      <a-entity obj-model="obj: #landscape-obj; mtl: #landscape-mtl" position="30 0 -20" scale="10 10 10" rotation="0 270 0"></a-entity>
      <a-entity obj-model="obj: #landscape-obj; mtl: #landscape-mtl" position="-130 0 100" scale="100 100 100" rotation="0 90 0"></a-entity>
      <a-entity geometry="primitive:plane; height:1000; width:1000" static-body position="0 0 0" rotation="-90 0 0"></a-entity>
      <a-obj-model id="cat" follow="target:#player; speed:1" position="-4 1 -10" scale = "1 1 1" rotation = "0 -120 0" src="#cat-obj" mtl="#cat-mtl" dynamic-body="angularDamping:0.99; shape:cylinder" ></a-obj-model>
	  <a-obj-model follow="target:#player; speed:1" position="-10 1 -10" scale = "1 1 1" src="#mouse-obj" mtl="#mouse-mtl" dynamic-body="angularDamping:0.99; shape:cylinder" ></a-obj-model>
	 
   <!----------------------------------------------------- large trees ---------------------------------------------------------------->
      <a-entity obj-model="obj: #tree-obj; mtl: #tree-mtl" position="60 0 -110" scale="30 30 30" rotation="0 90 0"></a-entity>
      <a-entity obj-model="obj: #tree-obj; mtl: #tree-mtl" position="60 0 -80" scale="30 30 30" rotation="0 90 0"></a-entity>
      <a-entity obj-model="obj: #tree-obj; mtl: #tree-mtl" position="-50 0 -180" scale="30 30 30" rotation="0 90 0"></a-entity>
      <a-entity obj-model="obj: #tree-obj; mtl: #tree-mtl" position="-20 0 -180" scale="30 30 30" rotation="0 90 0"></a-entity>

   <!----------------------------------------------------- smaller trees ---------------------------------------------------------------->
      <a-entity obj-model="obj: #twotrees-obj; mtl: #twotrees-mtl" position="50 0 30" scale="10 10 10" rotation="0 210 0"></a-entity>
      <a-entity obj-model="obj: #twotrees-obj; mtl: #twotrees-mtl" position="50 0 40" scale="10 10 10" rotation="0 210 0"></a-entity>
      <a-entity obj-model="obj: #twotrees-obj; mtl: #twotrees-mtl" position="50 0 50" scale="10 10 10" rotation="0 210 0"></a-entity>
      <a-entity obj-model="obj: #twotrees-obj; mtl: #twotrees-mtl" position="50 0 60" scale="10 10 10" rotation="0 210 0"></a-entity>

      <a-entity obj-model="obj: #twotrees-obj; mtl: #twotrees-mtl" position="-20 0 -75" scale="10 10 10" rotation="0 50 0"></a-entity>
      <a-entity obj-model="obj: #twotrees-obj; mtl: #twotrees-mtl" position="-10 0 -75" scale="10 10 10" rotation="0 50 0"></a-entity>
      <a-entity obj-model="obj: #twotrees-obj; mtl: #twotrees-mtl" position="0 0 -75" scale="10 10 10" rotation="0 50 0"></a-entity>
      <a-entity obj-model="obj: #twotrees-obj; mtl: #twotrees-mtl" position="10 0 -75" scale="10 10 10" rotation="0 50 0"></a-entity>

  <!----------------------------------------------------- HUD ----------- ---------------------------------------------------------------->
      <a-entity camera wasd-controls look-controls id= "player" position="0 1.6 0" shoot="direction: 0 0 -1; spaceKeyEnabled: true">
        <a-text id="score" value="Score" position="-1.6 -0.55 -1" color="red" width="3" anchor="left"></a-text>
        <a-text id="health" value="Health" position="-1.6 -0.7 -1" color="red" width="3" anchor="left"></a-text>
        <a-cursor material="color: red; shader: flat">
            <a-entity position="0 -5.5 0" id='weapon'>
                <a-entity obj-model="obj: #cheese-obj; mtl: #cheese-mtl" scale="1 1 1" rotation= "0 0 0" static-body></a-entity>
            </a-entity>
        </a-cursor>
      </a-entity>


    </a-scene>
  </body>
</html>
